<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Cadastro de Aluno</title>
</h:head>
<h:body>

	<p:ajaxStatus onstart="PF('statusDialog').show()"
		onsuccess="PF('statusDialog').hide()" />

	<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
		closable="false" resizable="false" showHeader="false">
		<p:graphicImage name="/images/loading.gif" />
	</p:dialog>

	<h:form>
		<p:panel id="panel" header="Cadastro de Aluno">

			<p:growl id="growl" />
			
			<h:panelGrid columns="2" cellpadding="5">
				<p:commandLink value="Nome:" onclick="PF('listagem').show();" />
				<p:inputText id="itNome" value="#{alunoController.entity.nome}"/>

				<p:outputLabel value="Matricula:" />
				<p:inputText value="#{alunoController.entity.matricula}" />

				<p:outputLabel value="Data de Aniversário:" />
				<p:calendar value="#{alunoController.entity.dataAniversario}"
					pattern="dd/MM/yyyy" />

				<p:outputLabel value="E-mail:" />
				<p:inputText value="#{alunoController.entity.email}" />
			</h:panelGrid>

			<p:commandButton value="Salvar" process="@form" update="panel"
				action="#{alunoController.salvar}" />

			<p:commandButton value="Excluir" process="@form" update="panel"
				action="#{alunoController.excluir}" >
				<p:confirm header="Confirmação" 
						   message="Confirma a exclusão?" />
			</p:commandButton>
			
			<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
		        <p:commandButton value="Sim" type="button"  styleClass="ui-confirmdialog-yes"  />
		        <p:commandButton value="Não" type="button"  styleClass="ui-confirmdialog-no" />
		    </p:confirmDialog> 

			<p:commandButton value="Limpar" process="@form" update="panel"
				action="#{alunoController.limpar}" />

		</p:panel>
		<p:dialog header="Listagem de Alunos" 
				  widgetVar="listagem" 
				  modal="true" 
				  height="300"
				  width="90%"
				  resizable="false">
			<p:outputLabel value="Nome: "/>
			<p:inputText id="itFiltro" value="#{alunoController.filtro}"/>
			<p:commandButton value="Pesquisar"
				actionListener="#{alunoController.pesquisar}"
				process="@this itFiltro"
				update="dtListagem"/>
			<br/>	  
		    <p:dataTable id="dtListagem" var="entity" value="#{alunoController.listaAluno}">
			    <p:column headerText="Id">
			        <h:outputText value="#{entity.id}" />
			    </p:column>
			 
			    <p:column headerText="Nome">
			        <h:commandLink value="#{entity.nome}"
			        	actionListener="#{alunoController.editar(entity.id)}" />
			    </p:column>
			 
			    <p:column headerText="Matricula">
			        <h:outputText value="#{entity.matricula}" />
			    </p:column>
			 
			    <p:column headerText="Data Aniversário">
			        <h:outputText value="#{entity.dataAniversario}" />
			    </p:column>
			    
			    <p:column headerText="E-Mail">
			        <h:outputText value="#{entity.email}" />
			    </p:column>			    
			</p:dataTable>
		</p:dialog>
	</h:form>
</h:body>
</html>